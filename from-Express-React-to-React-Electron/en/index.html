<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <title>from Express-React to React-Electron | siyuanqiu&#39;s blog</title>
  <meta name="keywords" content=" nodejs , react , electron ">
  <meta name="description" content="from Express-React to React-Electron | siyuanqiu&#39;s blog">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="Siyuan Qiu 邱思远Graduated from University of Toronto, Statistics and Computer Science, honors Bachelor of Science. Currently working on cloud platform aiming for AI and data science services. Interested">
<meta property="og:type" content="website">
<meta property="og:title" content="About">
<meta property="og:url" content="https://qiusiyuan.github.io/about/index.html">
<meta property="og:site_name" content="siyuanqiu&#39;s blog">
<meta property="og:description" content="Siyuan Qiu 邱思远Graduated from University of Toronto, Statistics and Computer Science, honors Bachelor of Science. Currently working on cloud platform aiming for AI and data science services. Interested">
<meta property="og:locale" content="en, ch">
<meta property="og:updated_time" content="2020-01-13T20:30:36.298Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="About">
<meta name="twitter:description" content="Siyuan Qiu 邱思远Graduated from University of Toronto, Statistics and Computer Science, honors Bachelor of Science. Currently working on cloud platform aiming for AI and data science services. Interested">


<link rel="icon" href="/img/yotsugi.jpg">

<link href="/css/style.css?v=1.0.1" rel="stylesheet">

<link href="/css/hl_theme/atom-light.css?v=1.0.1" rel="stylesheet">

<link href="//cdn.bootcss.com/animate.css/3.5.2/animate.min.css" rel="stylesheet">
<link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="/js/jquery.autocomplete.min.js?v=1.0.1"></script>

<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js"></script>



<script src="//cdn.bootcss.com/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>

<script src="/js/iconfont.js?v=1.0.1"></script>

</head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="false">
  <input class="theme_blog_path" value>
</div>

<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/" class="avatar_target">
    <img class="avatar" src="/img/yotsugi.jpg" />
</a>
<div class="author">
    <span>Siyuan Qiu</span>
</div>

<div class="icon">
    
        
    
        
        <a title="github" href="https://github.com/qiusiyuan" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-github"></use>
                </svg>
            
        </a>
        
    
        
    
        
    
        
        <a title="linkedin" href="https://www.linkedin.com/in/siyuan-qiu-570266140/" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-linkedin"></use>
                </svg>
            
        </a>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
</div>




<ul>
    <li><div class="all active">All<small>(6)</small></div></li>
    
        
            
            <li><div data-rel="Random">Random<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="StudyNotes">StudyNotes<small>(2)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="Experience">Experience<small>(3)</small></div>
                
            </li>
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
    
    
    
    
    </div>
    <div><a class="about  hasFriend  site_url"  href="/about">About</a><a style="width: 50%"  class="friends">Links</a></div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="6">
<input type="hidden" id="yelog_site_word_count" value="4.6k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        Links
        <i class="back-title-list"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="http://yelog.org/">叶落阁</a></li>
            
            <li><a target="_blank" href="https://www.cnblogs.com/shamo89/p/8178109.html">springboot中配置文件application.properties的理解</a></li>
            
            <li><a target="_blank" href="https://github.com/hansonwang99/Spring-Boot-In-Action">Spring-Boot-In-Action</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <form onkeydown="if(event.keyCode==13){return false;}">
        <input class="search" type="text" placeholder="Search..." autocomplete="off"id="local-search-input" >
        <i class="cross"></i>
        <span>
            <label for="tagswitch">Tags:</label>
            <input id="tagswitch" type="checkbox" style="display: none" />
            <i id="tagsWitchIcon"></i>
        </span>
    </form>
    <div class="tags-list">
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color2">random</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color4">web</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color3">network</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color4">security</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color2">spring boot</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color3">spring boot admin</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color5">java</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color2">spring</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color2">nodejs</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color2">gitpod</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color1">react</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color2">docker</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color5">hexo</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color5">blog</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color4">electron</a>
    </li>
    
    <div class="clearfix"></div>
</div>

    
    <nav id="title-list-nav">
        
        <a  class="Random "
           href="/hello-blog/undefined/"
           data-tag="random"
           data-author="" >
            <span class="post-title" title="hello blog">hello blog</span>
            <span class="post-date" title="2019-10-06 06:49:31">2019/10/06</span>
        </a>
        
        <a  class="StudyNotes "
           href="/Nmap-study-notes/ch/"
           data-tag="web,network,security"
           data-author="" >
            <span class="post-title" title="Nmap study notes">Nmap study notes</span>
            <span class="post-date" title="2019-10-07 12:28:26">2019/10/07</span>
        </a>
        
        <a  class="Experience "
           href="/Quick-Setup-for-Sring-Boot-Admin-2-2/en/"
           data-tag="spring boot,spring boot admin,java,spring"
           data-author="" >
            <span class="post-title" title="Quick Setup for Sring Boot Admin 2.2">Quick Setup for Sring Boot Admin 2.2</span>
            <span class="post-date" title="2020-01-13 20:22:29">2020/01/13</span>
        </a>
        
        <a  class="Experience "
           href="/gitpod-and-nodejs-example/en/"
           data-tag="nodejs,gitpod,react,docker"
           data-author="" >
            <span class="post-title" title="gitpod and nodejs example">gitpod and nodejs example</span>
            <span class="post-date" title="2019-10-31 12:24:07">2019/10/31</span>
        </a>
        
        <a  class="StudyNotes "
           href="/hexo-blog-tool/en/"
           data-tag="nodejs,hexo,blog"
           data-author="" >
            <span class="post-title" title="hexo blog tool">hexo blog tool</span>
            <span class="post-date" title="2019-11-01 19:44:01">2019/11/01</span>
        </a>
        
        <a  class="Experience "
           href="/from-Express-React-to-React-Electron/en/"
           data-tag="nodejs,react,electron"
           data-author="" >
            <span class="post-title" title="from Express-React to React-Electron">from Express-React to React-Electron</span>
            <span class="post-date" title="2019-10-12 08:29:46">2019/10/12</span>
        </a>
        
    </nav>
</div>
    </div>
    <div class="hide-list">
        <div class="semicircle">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div class="post">
    <div class="pjax">
        <article id="post-from-Express-React-to-React-Electron" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">from Express-React to React-Electron</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            
                <a href="javascript:" data-rel="Experience">Experience</a>
            
        </span>
        
        
        <span class="tag">
            
            <a href="javascript:" class="color2">nodejs</a>
            
            <a href="javascript:" class="color1">react</a>
            
            <a href="javascript:" class="color4">electron</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
        Post time:<time class="date" title='更新时间: 2020-01-13 20:30:36'>2019-10-12 08:29</time>
        
    </div>
    <div class="article-meta">
        
        <span>Words count:2k</span>
        
        
        <span id="busuanzi_container_page_pv">
            Read#:<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
        <span class="top-comment" title="跳转至评论区">
            <a href="#comments">
                Comments#:<span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </a>
        </span>
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Why-Electron"><span class="toc-text">Why Electron</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Precondition"><span class="toc-text">Precondition</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Put-in-Electron"><span class="toc-text">Put in Electron</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BroswerRouter"><span class="toc-text">BroswerRouter</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Communication-between-backend"><span class="toc-text">Communication between backend</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#IPC"><span class="toc-text">IPC</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-To-add-ipcRenderer"><span class="toc-text">1.To add ipcRenderer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-To-use-ipcMain"><span class="toc-text">2. To use ipcMain</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-Use-ipcRender-to-talk-with-ipcMain"><span class="toc-text">3. Use ipcRender to talk with ipcMain</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Data-storage"><span class="toc-text">Data storage</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Build-and-Install"><span class="toc-text">Build and Install</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#References"><span class="toc-text">References</span></a></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-4 i,
    .toc-level-4 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Why-Electron"><a href="#Why-Electron" class="headerlink" title="Why Electron"></a>Why Electron</h2><p><a href="https://electronjs.org/" target="_blank" rel="noopener">Electron</a> is an open-source framework that can be used to build cross platform desktop apps with JavaScript, HTML and CSS. And most importantly, you can have all the Node.js api within an Electron app so that you use plenty of poweful Node modules such as <code>fs</code>.</p>
<p><a href="https://reactjs.org/" target="_blank" rel="noopener">React</a> is a very popular frontend framework, that make interactive UIs really easy to implement.</p>
<p>Express-React is currently a popular model for web application. It’s acing for its simplicity and easiness to deploy. Not only production but also individuals are building a Express-React app for self-usage. In many cases, the usages are very small and for simple tasks. Imagine that if we could make them desktop apps, so that there’s no server, and you only need a simple double-click and the application will start.</p>
<p>And here’s where the Electron framework comes in.</p>
<h2 id="Precondition"><a href="#Precondition" class="headerlink" title="Precondition"></a>Precondition</h2><p>Firstly, suppose now we have an Express-React app. And our Express server exposes REST api for communication with React app. And suppose we have a good programming style that we separate our <strong>utility</strong> functions which do real functionality from our controllers and routers. This way, we can later ask our Electron app to directly use those functions since we are replacing Express with Electron.</p>
<h2 id="Put-in-Electron"><a href="#Put-in-Electron" class="headerlink" title="Put in Electron"></a>Put in Electron</h2><p>To put such a project into Electron app is simple, you simply add an <code>electron.js</code> into the React app root folder with following code</p>
<pre><code class="js">const { app, BrowserWindow } = require(&#39;electron&#39;);
let win = null;

function createWindow () {
  // Create the browser window.
  win = new BrowserWindow({
    width: 1296,
    height: 720,
    webPreferences: {
      nodeIntegration: true,
    }
  })
  // and load the index.html of the app.
  win.loadFile(
  &quot;build/index.html&quot;
  );

  // Emitted when the window is closed.
  win.on(&#39;closed&#39;, () =&gt; {
    // Dereference the window object, usually you would store windows
    // in an array if your app supports multi windows, this is the time
    // when you should delete the corresponding element.
    win = null
  })
}

// This method will be called when Electron has finished
// initialization and is ready to create browser windows.
// Some APIs can only be used after this event occurs.
app.on(&#39;ready&#39;, createWindow)

// Quit when all windows are closed.
app.on(&#39;window-all-closed&#39;, () =&gt; {
  // On macOS it is common for applications and their menu bar
  // to stay active until the user quits explicitly with Cmd + Q
  if (process.platform !== &#39;darwin&#39;) {
    app.quit()
  }
})

app.on(&#39;activate&#39;, () =&gt; {
  // On macOS it&#39;s common to re-create a window in the app when the
  // dock icon is clicked and there are no other windows open.
  if (win === null) {
    createWindow()
  }
})
</code></pre>
<p>Notice that we ask window to load a html file from</p>
<pre><code class="js">win.loadFile(
  &quot;build/index.html&quot;
  );
</code></pre>
<p>This is where the React build file should locate and this is default by calling <code>react-scripts build</code></p>
<p>And here’s the <strong>scripts</strong> in <code>package.json</code> that I use,</p>
<pre><code class="js">&quot;scripts&quot;: {
    &quot;react-start&quot;: &quot;react-scripts start&quot;,
    &quot;react-build&quot;: &quot;react-scripts build&quot;,
    &quot;react-test&quot;: &quot;react-scripts test&quot;,
    &quot;react-eject&quot;: &quot;react-scripts eject&quot;,
    &quot;electron-start&quot;: &quot;electron .&quot;,
    &quot;electron-build&quot;: &quot;electron-builder&quot;,
    &quot;release&quot;: &quot;npm run react-build &amp;&amp; electron-builder --publish=always&quot;,
    &quot;build&quot;: &quot;npm run react-build  &amp;&amp; npm run electron-build&quot;,
    &quot;file-start&quot;: &quot;npm run react-build &amp;&amp; npm run electron-start&quot;
  }
</code></pre>
<p>Also add two fields into <code>package.json</code> for electron:</p>
<pre><code class="js">&quot;main&quot;: &quot;./electron.js&quot;,
&quot;homepage&quot;: &quot;./&quot;,
</code></pre>
<p>I used <code>electron-builder</code> module to build electron apps. Run <code>npm i -save electron-builder</code> to install it.</p>
<p>To start the App for development, run <code>npm run file-start</code>. From above script, this will <strong>build react app</strong> first and then <strong>start the electron app</strong></p>
<p>Notice that your App might shows nothing or can’t function properly as there are still something to care about.</p>
<h2 id="BroswerRouter"><a href="#BroswerRouter" class="headerlink" title="BroswerRouter"></a>BroswerRouter</h2><p>Your React app, as it is transformed from an web app, must have <strong>Routes</strong> for multiple pages.</p>
<p>If you are using <code>react-router-dom</code>, you might have problem that your page is blank when you start electron if you are using <strong>BrowserRouter</strong>.</p>
<p>In this case we should replace <strong>BrowserRouter</strong> with <strong>HashRouter</strong>.</p>
<p><strong>BrowserRouter</strong> will send request with the whole routes, for example, <code>http://myexample.com/routes/path</code> to server. While <strong>HashRouter</strong> instead, will handle the  routes in the client side. Remember that we let the electron.js to load html from file, which means there won’t be a server to serve this.</p>
<pre><code class="js">win.loadFile(
  &quot;build/index.html&quot;
  );
</code></pre>
<p>So we need the client to handle the routes change in this case, and we replace the <strong>BrowserRouter</strong> with the <strong>HashRouter</strong> here.<br><a href="https://reacttraining.com/react-router/web/api/HashRouter" target="_blank" rel="noopener">more info about HashRouter</a></p>
<h2 id="Communication-between-backend"><a href="#Communication-between-backend" class="headerlink" title="Communication between backend"></a>Communication between backend</h2><p>Your react app might have communication between the Express backend(or other backend) through http request.</p>
<p>For example, in my project, I send a http request from frontend and get the data sent back from my backend and use it to update states of my component. My backend, which also setup in my local, once get the request, will talk to my local file system, fetch the data, compose the response and then send it back to frontend.</p>
<p>If your app is the similar to mine, here are a few points to make changes to fulfill our pure offline desktop app.</p>
<h3 id="IPC"><a href="#IPC" class="headerlink" title="IPC"></a>IPC</h3><p>Electron allows the main process talk with renderer processes through IPC (Inter-process communication) using <a href="https://electronjs.org/docs/api/ipc-main" target="_blank" rel="noopener">ipcMain</a> and <a href="https://electronjs.org/docs/api/ipc-renderer" target="_blank" rel="noopener">ipcRenderer</a>.</p>
<p>Here, our main process is the Electron app. And the renderer process is our React app.</p>
<h4 id="1-To-add-ipcRenderer"><a href="#1-To-add-ipcRenderer" class="headerlink" title="1.To add ipcRenderer"></a>1.To add <code>ipcRenderer</code></h4><p>If you have tried your own, you might find that below code can not be compiled within React,</p>
<pre><code class="js">const ipcRenderer = require(&#39;electron&#39;).ipcRenderer
</code></pre>
<p>To use ipcRenderer, we have a workaround for React app.<br>Firstly, we need a new file <code>preload.js</code> with content,</p>
<pre><code class="js">window.ipcRenderer = require(&#39;electron&#39;).ipcRenderer;
</code></pre>
<p>then add it in the preload field when creating window in <code>electron.js</code>,</p>
<pre><code class="diff">win = new BrowserWindow({
  width: 1296,
  height: 720,
  webPreferences: {
  nodeIntegration: true,
+  preload: __dirname + &#39;/preload.js&#39;
 }
})
</code></pre>
<p>Now within your React code, you can access <code>ipcRenderer</code> by using <strong>window.ipcRenderer</strong>.</p>
<h4 id="2-To-use-ipcMain"><a href="#2-To-use-ipcMain" class="headerlink" title="2. To use ipcMain"></a>2. To use <code>ipcMain</code></h4><p>Create <code>main_process.js</code> under the same folder with <code>electron.js</code>.</p>
<p><code>ipcMain</code> as said in the documentation, is an instance of the EventEmitter class. We want to use it as a backend so that it should talk to the file system, fetch the data or change the data and compose the response and send it back.</p>
<p>Here’s an example of my use of <code>ipcMain</code>, within <code>main_process.js</code>:</p>
<pre><code class="js">const {ipcMain} = require(&#39;electron&#39;);
const dataUtils = require(&#39;./server/controllers/utils/dataUtils&#39;);

ipcMain.on(&#39;data&#39;, (event, arg) =&gt; {
    let data = dataUtils.list(arg);
    let args = {
        success: true,
        data: data
    }
    event.sender.send(&quot;data-reply&quot;, args);
});
</code></pre>
<p><code>dataUtils</code> is to reuse my utility code within my Express backend. Remember in <a href="#Precondition">Precondition</a> I mentioned that if you separate your utility functions which do real functionality from the controllers and routers, you can reuse those functions for your electron app.</p>
<p>We use <code>ipcMain</code> to handle asynchronous messages from <code>renderer</code> process, and send back args using another event. You can also check for errors and other condition handling and send corresponding message back to frontend. I used this just like the REST api that I did in my Express app. I didn’t include <code>statusCode</code> as I didn’t use it. What I mean is that you can use it just like a response of http request and you don’t need to modify your code much in the frontend.</p>
<p>And we import this file as the start of our Electron app,<br>in <code>electron.js</code>, add,</p>
<pre><code class="js">require(&quot;./main_process.js&quot;);
</code></pre>
<h4 id="3-Use-ipcRender-to-talk-with-ipcMain"><a href="#3-Use-ipcRender-to-talk-with-ipcMain" class="headerlink" title="3. Use ipcRender to talk with ipcMain"></a>3. Use <code>ipcRender</code> to talk with <code>ipcMain</code></h4><p>In React app, I used <code>axios</code> to send http request to backend. Now I should change it to use <code>ipcRenderer</code>.</p>
<p>Here’s an example of my code change. <strong>Before</strong> changing it looks like,</p>
<pre><code class="js">getData(){
  this.setState({
    loading: true
  });
  axios.get(&#39;http://localhost:3001/api/data&#39;)
  .then(res =&gt; {
    this.setState({
      data: res.data.data,
      loading: false,
    });
  })
}
</code></pre>
<p><strong>Now</strong> we change it to,</p>
<pre><code class="js">getData(){
  this.setState({
    loading: true
  });
  window.ipcRenderer.send(&#39;data&#39;, &#39;&#39;);
  window.ipcRenderer.once(&quot;data-reply&quot;, (event, arg) =&gt; {
    this.setState({
      data: arg.data,
      loading: false,
    });
  })
}
</code></pre>
<p>Notice that I have <code>&#39;&#39;</code> as the <code>argument</code> to send with <code>data</code> event, because I don’t need any arguments in this use case. You can still send any data as the arguments to <code>ipcMain</code>, for example,</p>
<pre><code class="js">window.ipcRenderer.send(&#39;getOne&#39;, {uid: this.state.uid});
</code></pre>
<p>Also notice that to get response, I used <code>window.ipcRenderer.once</code>, this is important. <strong>once</strong> is a one time <code>listener</code> for the event, it will be removed after being invoked. Please be sure to use <strong>once</strong> instead of <strong>on</strong> here. Or it will hang forever since it’s trying to waiting for handling all the <code>data-reply</code> events. Please consult <a href="https://electronjs.org/docs/api/ipc-renderer" target="_blank" rel="noopener">ipcRenderer</a> for more information.</p>
<h2 id="Data-storage"><a href="#Data-storage" class="headerlink" title="Data storage"></a>Data storage</h2><p>Your backend might need to store data in the local file system. Remember that your Electron app is a desktop app and it can be installed in some other computers. No one wants a app storing data in some random places. So Electron provides certains places to store it.</p>
<p>By default, Electron stores app data in</p>
<ul>
<li><code>%APPDATA%</code> on Windows</li>
<li><code>$XDG_CONFIG_HOME</code> or <code>~/.config</code> on Linux</li>
<li><code>~/Library/Application Support</code> on macOS</li>
</ul>
<p>A directory with your app’s name will be created under this path when whether you start the electron app with <code>electron .</code> or you install it with the installer.</p>
<p><a href="https://electronjs.org/docs/api/app#appgetpathname" target="_blank" rel="noopener">app.getPath</a> provides ways to access these paths. It also provides ways  to access other app related places.<br>The most commonly used and what I am using is <strong>userData</strong>.<br>Example,</p>
<pre><code class="js">const { app } = require (&#39;electron&#39;);
const path = require(&#39;path&#39;);
const modelPath = path.join(app.getPath(&quot;userData&quot;), &#39;model&#39;);
let files = fs.readdirSync(modelPath);
// Do other stuff
</code></pre>
<p>This code is located in my server side <code>dao</code> folder. And utility functions mentioned above will directly call <code>dao</code> object to manipulate data in file system.</p>
<p>To customize those paths, you can use <a href="https://electronjs.org/docs/api/app#appsetpathname-path" target="_blank" rel="noopener">app.setPath</a>.<br>Please be sure to go through both APIs before you use them.</p>
<h2 id="Build-and-Install"><a href="#Build-and-Install" class="headerlink" title="Build and Install"></a>Build and Install</h2><p>To successfully build the Electron, we need to include files dependencies. Remember we add multiple files for our projects and we need to add them into build dependencies.</p>
<p>Add all the used files into <code>&quot;build&quot;</code>,  <code>&quot;files&quot;</code> in the <code>package.json</code>,</p>
<pre><code class="diff">  &quot;build&quot;: {
    &quot;appId&quot;: &quot;name&quot;,
    &quot;extends&quot;: null,
    &quot;files&quot;: [
      &quot;electron.js&quot;,
      &quot;build/**/*&quot;,
      &quot;node_modules/**/*&quot;,
+      &quot;server/**/*&quot;,
+      &quot;preload.js&quot;,
+      &quot;main_process.js&quot;
    ],
     &quot;directories&quot;: {
      &quot;buildResources&quot;: &quot;assets&quot;
    }
  },</code></pre>
<p><code>server/**/*</code> is my backend source file, it includes utility functions and their dependency functions that I reused in the electron app and this is why I put it in the build.</p>
<p>As shown in the <code>scripts</code> section in <code>package.json</code>, run</p>
<pre><code>npm run build
</code></pre><p>will start build both react and electron app.</p>
<p>As a result, built files will be located in the <code>dist</code> folder under project root. You may find a <code>setUp</code> application, which is an installer allow you install on other computers.</p>
<p>You may also find an <code>unpack</code> folder, in which you can find a ready-to-use application with your app’s name. You can now play with it by double clicking it.</p>
<p>There are also many other settings for <code>electron builder</code> like setting icons or specifying platform. Please search online and there are plenty of sources for it.</p>
<p>Hope this blog can help you with your Electron-React app.</p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><p><a href="https://electronjs.org/" target="_blank" rel="noopener">Electron | Build cross platform desktop apps with JavaScript, HTML, and CSS.</a><br><a href="https://reacttraining.com/react-router/web/api/HashRouter" target="_blank" rel="noopener">React Router: Declarative Routing for React.js</a><br>Other online sources</p>

      
       <hr><span style="font-style: italic;color: gray;"> Please respect copyright, feel free to leave comment for any mistake or confusion. 转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。可以在下面评论区评论。 </span>
    </div>
</article>



<div class="article_copyright">
    <p><span class="copy-title">文章标题(Title):</span>from Express-React to React-Electron</p>
    <p><span class="copy-title">文章字数(Word count):</span><span class="post-count">2k</span></p>
    <p><span class="copy-title">本文作者(Author):</span><a href="javascript:void(0)" title="Siyuan Qiu">Siyuan Qiu</a></p>
    <p><span class="copy-title">发布时间(Post Date):</span>2019-10-12, 08:29:46</p>
    <p><span class="copy-title">最后更新(Last updated):</span>2020-01-13, 20:30:36</p>
    <span class="copy-title">原始链接(Source link):</span><a class="post-url" href="/from-Express-React-to-React-Electron/en/" title="from Express-React to React-Electron">https://qiusiyuan.github.io/from-Express-React-to-React-Electron/en/</a>
    <p>
        <span class="copy-title">版权声明(License):</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0 (CC BY-NC-SA 4.0)"</a> 
    </p>
</div>



    <div id="comments"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

<script type="text/javascript">
    $.getScript('/js/gitalk.js', function () {
        var gitalk = new Gitalk({
            clientID: 'a8e47d893251002e3af2',
            clientSecret: '9b47d87ed351ebef9bb31dcacf20321f02e5c42a',
            repo: 'qiusiyuan.github.io',
            owner: 'qiusiyuan',
            admin: ['qiusiyuan'],
            id: decodeURI(location.pathname),
            distractionFreeMode: 'true',
            language: 'en',
            perPage: parseInt('10',10)
        })
        gitalk.render('comments')
    })
</script>




    




    </div>
    <div class="copyright">
        <p class="footer-entry">©2019 qiusiyuan</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full"><span class="min "></span></button>
<button class="post-toc-menu"><span class="post-toc-menu-icons"></span></button>
<div class="post-toc"><span class="post-toc-title">目录 Index</span>
    <div class="post-toc-content">

    </div>
</div>
<a class="" id="rocket" href="javascript:void(0)"></a>
    </div>
</div>
<div class="acParent"></div>

</body>
<script src="/js/jquery.pjax.js?v=1.0.1" ></script>

<script src="/js/script.js?v=1.0.1" ></script>
<script>
    var img_resize = 'default';
    /*作者、标签的自动补全*/
    $(function () {
        $('.search').AutoComplete({
            'data': ['#random','#web','#network','#security','#spring boot','#spring boot admin','#java','#spring','#nodejs','#gitpod','#react','#docker','#hexo','#blog','#electron',],
            'itemHeight': 20,
            'width': 418
        }).AutoComplete('show');
    })
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $(".post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        

        /*高亮代码块行号*/
        
        $('pre code').each(function(){
            var lines = $(this).text().split('\n').length - 1, widther='';
            if (lines>99) {
                widther = 'widther'
            }
            var $numbering = $('<ul/>').addClass('pre-numbering ' + widther).attr("unselectable","on");
            $(this).addClass('has-numbering ' + widther)
                    .parent()
                    .append($numbering);
            for(var i=1;i<=lines;i++){
                $numbering.append($('<li/>').text(i));
            }
        });
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
    }

    /*打赏页面隐藏与展示*/
    

</script>

<!--加入行号的高亮代码块样式-->

<style>
    pre{
        position: relative;
        margin-bottom: 24px;
        border-radius: 10px;
        border: 1px solid #e2dede;
        background: #FFF;
        overflow: hidden;
    }
    code.has-numbering{
        margin-left: 30px;
    }
    code.has-numbering.widther{
        margin-left: 35px;
    }
    .pre-numbering{
        margin: 0px;
        position: absolute;
        top: 0;
        left: 0;
        width: 20px;
        padding: 0.5em 3px 0.7em 5px;
        border-right: 1px solid #C3CCD0;
        text-align: right;
        color: #AAA;
        background-color: #fafafa;
    }
    .pre-numbering.widther {
        width: 35px;
    }
</style>

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
        .nav .hide-list.fullscreen {
            left: 492px
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    
    .post .pjax article .article-entry>ol, .post .pjax article .article-entry>ul, .post .pjax article>ol, .post .pjax article>ul{
        border: #e2dede solid 1px;
        border-radius: 10px;
        padding: 10px 32px 10px 56px;
    }
    .post .pjax article .article-entry li>ol, .post .pjax article .article-entry li>ul,.post .pjax article li>ol, .post .pjax article li>ul{
        padding-top: 5px;
        padding-bottom: 5px;
    }
    .post .pjax article .article-entry>ol>li, .post .pjax article .article-entry>ul>li,.post .pjax article>ol>li, .post .pjax article>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    .post .pjax article .article-entry li>ol>li, .post .pjax article .article-entry li>ul>li,.post .pjax article li>ol>li, .post .pjax article li>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    
    .nav-right:before {
        content: ' ';
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        opacity: 0.3;
        background: url("https://i.loli.net/2019/07/22/5d3521411f3f169375.png");
        background-repeat: no-repeat;
        background-position: 50% 0;
        -ms-background-size: cover;
        -o-background-size: cover;
        -moz-background-size: cover;
        -webkit-background-size: cover;
        background-size: cover;
    }
    

    
    .post .pjax article :not(pre) > code {
        color: #24292e;
        font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;
        background-color: rgba(27,31,35,.05);
        border-radius: 3px;
        font-size: 85%;
        margin: 0;
        padding: .2em .4em;
    }
    
</style>







</html>
